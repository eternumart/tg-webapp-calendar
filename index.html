<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>–í—ã–±–æ—Ä –¥–∞—Ç—ã</title>
		<script src="https://telegram.org/js/telegram-web-app.js"></script>
		<link rel="stylesheet" href="index.css" />
	</head>
	<body class="page">
		<h3 class="title">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –¥–µ–¥–ª–∞–π–Ω–∞</h3>
		<input class="calendar" type="date" id="datePicker" />
		<button class="submit">–í—ã–±—Ä–∞—Ç—å</button>

		<script>
			const button = document.querySelector(".submit");
			button.addEventListener("click", sendDate);
			const tg = window.Telegram.WebApp;
			tg.ready();
			tg.expand();

			console.log("üß™ TG WebApp –∑–∞–≥—Ä—É–∂–µ–Ω", tg);
			console.log("üîç initDataUnsafe:", tg.initDataUnsafe);

			function sendDate() {
				const date = document.getElementById("datePicker").value;
				if (!date) return;

				const parts = date.split("-");
				const formatted = `${parts[2]}.${parts[1]}.${parts[0]}`;
				console.log("üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞—Ç—ã –≤ Telegram:", formatted);
				tg.sendData(formatted);
			}
		</script>
	</body>
</html>
